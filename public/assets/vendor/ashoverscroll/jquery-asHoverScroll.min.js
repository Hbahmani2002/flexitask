/*!
 * flexitask-client (undefined)
 * Copyright 2016 2Pi Digital Technologies
 * Licensed under the undefined
 */
!function(t){"use strict";var i="asHoverScroll",n=0,e=t[i]=function(i,s){this.element=i,this.$element=t(i),this.options=t.extend({},e.defaults,s,this.$element.data()),this.$list=t(this.options.list,this.$element),this.classes={disabled:this.options.namespace+"-disabled"},"vertical"===this.options.direction?this.attributes={page:"pageY",axis:"Y",position:"top",length:"height",offset:"offsetTop",client:"clientY",clientLength:"clientHeight"}:"horizontal"===this.options.direction&&(this.attributes={page:"pageX",axis:"X",position:"left",length:"width",offset:"offsetLeft",client:"clientX",clientLength:"clientWidth"}),this._states={},this._scroll={time:null,pointer:null},this.instanceId=++n,this._trigger("init"),this.init()};e.defaults={namespace:i,list:"> ul",item:"> li",exception:null,direction:"vertical",fixed:!1,mouseMove:!0,touchScroll:!0,pointerScroll:!0,useCssTransforms:!0,useCssTransforms3d:!0,boundary:10,throttle:20,onEnter:function(){t(this).siblings().removeClass("is-active"),t(this).addClass("is-active")},onLeave:function(){t(this).removeClass("is-active")}};var s={};e.support=s,function(i){function n(i,n){var e=!1,r=i.charAt(0).toUpperCase()+i.slice(1);return t.each((i+" "+o.join(r+" ")+r).split(" "),function(t,i){return void 0!==s[i]?(e=n?i:!0,!1):void 0}),e}function e(t){return n(t,!0)}var s=t("<support>").get(0).style,o=["webkit","Moz","O","ms"],r={transition:{end:{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"}},animation:{end:{WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd",animation:"animationend"}}},a={csstransforms:function(){return!!n("transform")},csstransforms3d:function(){return!!n("perspective")},csstransitions:function(){return!!n("transition")},cssanimations:function(){return!!n("animation")}};a.csstransitions()&&(i.transition=new String(e("transition")),i.transition.end=r.transition.end[i.transition]),a.cssanimations()&&(i.animation=new String(e("animation")),i.animation.end=r.animation.end[i.animation]),a.csstransforms()&&(i.transform=new String(e("transform")),i.transform3d=a.csstransforms3d()),"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch?i.touch=!0:i.touch=!1,window.PointerEvent||window.MSPointerEvent?i.pointer=!0:i.pointer=!1,i.convertMatrixToArray=function(t){return t&&"matrix"==t.substr(0,6)?t.replace(/^.*\((.*)\)$/g,"$1").replace(/px/g,"").split(/, +/):!1},i.prefixPointerEvent=function(t){return window.MSPointerEvent?"MSPointer"+t.charAt(9).toUpperCase()+t.substr(10):t}}(s),e.prototype={constructor:e,init:function(){this.initPosition(),this.updateLength(),this.bindEvents()},bindEvents:function(){var i=this,n=["enter"],e=[];this.options.mouseMove&&(this.$element.on(this.eventName("mousemove"),t.proxy(this.onMove,this)),n.push("mouseenter"),e.push("mouseleave")),this.options.touchScroll&&s.touch&&(this.$element.on(this.eventName("touchstart"),t.proxy(this.onScrollStart,this)),this.$element.on(this.eventName("touchcancel"),t.proxy(this.onScrollEnd,this))),this.options.pointerScroll&&s.pointer&&(this.$element.on(this.eventName(s.prefixPointerEvent("pointerdown")),t.proxy(this.onScrollStart,this)),this.$element.on(this.eventName(s.prefixPointerEvent("pointercancel")),t.proxy(this.onScrollEnd,this))),this.$list.on(this.eventName(n.join(" ")),this.options.item,function(){i.is("scrolling")||i.options.onEnter.call(this)}),this.$list.on(this.eventName(e.join(" ")),this.options.item,function(){i.is("scrolling")||i.options.onLeave.call(this)}),t(window).on(this.eventNameWithId("orientationchange"),function(){i.update.call(i)}),t(window).on(this.eventNameWithId("resize"),this.throttle(function(){i.update.call(i)},this.options.throttle))},unbindEvents:function(){this.$element.off(this.eventName()),this.$list.off(this.eventName()),t(window).off(this.eventNameWithId())},onScrollStart:function(i){var n=this;if(3!==i.which&&!(t(i.target).closest(this.options.exception).length>0)){this._scroll.time=(new Date).getTime(),this._scroll.pointer=this.pointer(i),this._scroll.start=this.getPosition(),this._scroll.moved=!1;var e=function(){n.enter("scrolling"),n._trigger("scroll")};this.options.touchScroll&&s.touch&&(t(document).on(n.eventName("touchend"),t.proxy(this.onScrollEnd,this)),t(document).one(n.eventName("touchmove"),t.proxy(function(){t(document).on(n.eventName("touchmove"),t.proxy(this.onScrollMove,this)),e()},this))),this.options.pointerScroll&&s.pointer&&(t(document).on(n.eventName(s.prefixPointerEvent("pointerup")),t.proxy(this.onScrollEnd,this)),t(document).one(n.eventName(s.prefixPointerEvent("pointermove")),t.proxy(function(){t(document).on(n.eventName(s.prefixPointerEvent("pointermove")),t.proxy(this.onScrollMove,this)),e()},this))),t(document).on(n.eventName("blur"),t.proxy(this.onScrollEnd,this)),i.preventDefault()}},onScrollMove:function(t){this._scroll.updated=this.pointer(t);var i=this.distance(this._scroll.pointer,this._scroll.updated);if((Math.abs(this._scroll.pointer.x-this._scroll.updated.x)>10||Math.abs(this._scroll.pointer.y-this._scroll.updated.y)>10)&&(this._scroll.moved=!0),this.is("scrolling")){t.preventDefault();var n=this._scroll.start+i;this.canScroll()&&(n>0?n=0:n<this.containerLength-this.listLength&&(n=this.containerLength-this.listLength),this.updatePosition(n))}},onScrollEnd:function(i){var n=this;this.options.touchScroll&&s.touch&&t(document).off(this.eventName("touchmove touchend")),this.options.pointerScroll&&s.pointer&&t(document).off(this.eventName(s.prefixPointerEvent("pointerup"))),t(document).off(this.eventName("blur")),this._scroll.moved||t(i.target).trigger("tap"),this.is("scrolling")&&setTimeout(function(){n.leave("scrolling"),n._trigger("scrolled")},500)},pointer:function(t){var i={x:null,y:null};return t=this.getEvent(t),t.pageX&&!this.options.fixed?(i.x=t.pageX,i.y=t.pageY):(i.x=t.clientX,i.y=t.clientY),i},getEvent:function(t){return t=t.originalEvent||t||window.event,t=t.touches&&t.touches.length?t.touches[0]:t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t},distance:function(t,i){return"vertical"===this.options.direction?i.y-t.y:i.x-t.x},onMove:function(t){if(t=this.getEvent(t),!this.is("scrolling")&&this.isMatchScroll(t)){var i,n,e;i=t[this.attributes.page]&&!this.options.fixed?t[this.attributes.page]:t[this.attributes.client],e=i-this.element[this.attributes.offset],e<this.options.boundary?n=0:(n=(e-this.options.boundary)*this.multiplier,n>this.listLength-this.containerLength&&(n=this.listLength-this.containerLength)),this.updatePosition(-n)}},isMatchScroll:function(i){return!this.is("disabled")&&this.canScroll()?this.options.exception?0===t(i.target).closest(this.options.exception).length:!0:!1},canScroll:function(){return this.listLength>this.containerLength},getContainerLength:function(){return this.element[this.attributes.clientLength]},getListhLength:function(){return this.$list[0][this.attributes.clientLength]},updateLength:function(){this.containerLength=this.getContainerLength(),this.listLength=this.getListhLength(),this.multiplier=(this.listLength-this.containerLength)/(this.containerLength-2*this.options.boundary)},initPosition:function(){var t=this.makePositionStyle(0);this.$list.css(t)},getPosition:function(){var t;if(this.options.useCssTransforms&&s.transform){if(t=this.options.useCssTransforms3d&&s.transform3d?s.convertMatrixToArray(this.$list.css(s.transform)):s.convertMatrixToArray(this.$list.css(s.transform)),!t)return 0;t="X"===this.attributes.axis?t[12]||t[4]:t[13]||t[5]}else t=this.$list.css(this.attributes.position);return parseFloat(t.replace("px",""))},makePositionStyle:function(t){var i,n="0px",e="0px";this.options.useCssTransforms&&s.transform?("X"===this.attributes.axis?n=t+"px":e=t+"px",i=s.transform.toString(),t=this.options.useCssTransforms3d&&s.transform3d?"translate3d("+n+","+e+",0px)":"translate("+n+","+e+")"):i=this.attributes.position;var o={};return o[i]=t,o},updatePosition:function(t){var i=this.makePositionStyle(t);this.$list.css(i)},update:function(){this.is("disabled")||(this.updateLength(),this.canScroll()||this.initPosition())},eventName:function(t){if("string"!=typeof t||""===t)return"."+i;t=t.split(" ");for(var n=t.length,e=0;n>e;e++)t[e]=t[e]+"."+i;return t.join(" ")},eventNameWithId:function(t){if("string"!=typeof t||""===t)return this.options.namespace+"-"+this.instanceId;t=t.split(" ");for(var i=t.length,n=0;i>n;n++)t[n]=t[n]+"."+this.options.namespace+"-"+this.instanceId;return t.join(" ")},_trigger:function(t){var n=Array.prototype.slice.call(arguments,1),e=[this].concat(n);this.$element.trigger(i+"::"+t,e),t=t.replace(/\b\w+\b/g,function(t){return t.substring(0,1).toUpperCase()+t.substring(1)});var s="on"+t;"function"==typeof this.options[s]&&this.options[s].apply(this,n)},is:function(t){return this._states[t]&&this._states[t]>0},enter:function(t){void 0===this._states[t]&&(this._states[t]=0),this._states[t]++},leave:function(t){this._states[t]--},throttle:function(t,i){var n,e,s,o=Date.now||function(){return(new Date).getTime()},r=null,a=0,h=function(){a=o(),r=null,s=t.apply(n,e),n=e=null};return function(){var l=o(),c=i-(l-a);return n=this,e=arguments,0>=c?(clearTimeout(r),r=null,a=l,s=t.apply(n,e),n=e=null):r||(r=setTimeout(h,c)),s}},enable:function(){this.is("disabled")&&(this.leave("disabled"),this.$element.removeClass(this.classes.disabled),this.bindEvents())},disable:function(){this.is("disabled")||(this.enter("disabled"),this.initPosition(),this.$element.addClass(this.classes.disabled),this.unbindEvents())},destory:function(){this.$element.removeClass(this.classes.disabled),this.unbindEvents(),this.$element.data(i,null),this._trigger("destory")}},t.fn[i]=function(n){if("string"!=typeof n)return this.each(function(){t.data(this,i)||t.data(this,i,new e(this,n))});var s=n,o=Array.prototype.slice.call(arguments,1);if(/^\_/.test(s))return!1;if(!/^(get)/.test(s))return this.each(function(){var n=t.data(this,i);n&&"function"==typeof n[s]&&n[s].apply(n,o)});var r=this.first().data(i);return r&&"function"==typeof r[s]?r[s].apply(r,o):void 0}}(jQuery);