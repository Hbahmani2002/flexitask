/*!
 * flexitask-client (undefined)
 * Copyright 2016 2Pi Digital Technologies
 * Licensed under the undefined
 */
!function(t,n,i,e){"use strict";function s(){return"undefined"!=typeof i.performance&&i.performance.now?i.performance.now():Date.now()}function o(t){return"string"==typeof t&&-1!=t.indexOf("%")}function r(t){return"string"==typeof t&&-1!=t.indexOf("px")}function a(t){return t&&"matrix"==t.substr(0,6)?t.replace(/^.*\((.*)\)$/g,"$1").replace(/px/g,"").split(/, +/):!1}function h(t){"string"!=typeof t&&(t=JSON.stringify(t));var n,i,e,s=0;if(0===t.length)return s;for(n=0,e=t.length;e>n;n++)i=t.charCodeAt(n),s=(s<<5)-s+i,s|=0;return s}function l(t,n,i,e){function s(t,n){return 1-3*n+3*t}function o(t,n){return 3*n-6*t}function r(t){return 3*t}function a(t,n,i){return((s(n,i)*t+o(n,i))*t+r(n))*t}function h(t,n,i){return 3*s(n,i)*t*t+2*o(n,i)*t+r(n)}function l(n){for(var e=n,s=0;4>s;++s){var o=h(e,t,i);if(0===o)return e;var r=a(e,t,i)-n;e-=r/o}return e}return t===n&&i===e?{css:"linear",fn:function(t){return t}}:{css:"cubic-bezier("+t+","+n+","+i+","+e+")",fn:function(t){return a(l(t),n,e)}}}function c(){return this.initialize.apply(this,Array.prototype.slice.call(arguments))}function u(){return this.initialize.apply(this,Array.prototype.slice.call(arguments))}function p(){return this.initialize.apply(this,Array.prototype.slice.call(arguments))}function d(){return this.initialize.apply(this,Array.prototype.slice.call(arguments))}var f=t.slidePanel=function(){f.show.apply(this,arguments)};Date.now||(Date.now=function(){return(new Date).getTime()});for(var g=["webkit","moz"],m=0;m<g.length&&!i.requestAnimationFrame;++m){var v=g[m];i.requestAnimationFrame=i[v+"RequestAnimationFrame"],i.cancelAnimationFrame=i[v+"CancelAnimationFrame"]||i[v+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS (6|7|8)/.test(i.navigator.userAgent)||!i.requestAnimationFrame||!i.cancelAnimationFrame){var w=0;i.requestAnimationFrame=function(t){var n=s(),i=Math.max(w+16,n);return setTimeout(function(){t(w=i)},i-n)},i.cancelAnimationFrame=clearTimeout}var _=function(){function s(n,i){var s=!1,o=n.charAt(0).toUpperCase()+n.slice(1);return r[n]!==e&&(s=n),s||t.each(a,function(t,n){return r[n+o]!==e?(s="-"+n.toLowerCase()+"-"+o,!1):void 0}),i?s:!!s}function o(t){return s(t,!0)}var r=t("<support>").get(0).style,a=["webkit","Moz","O","ms"],h={transition:{end:{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"}},animation:{end:{WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd",animation:"animationend"}}},l={csstransforms:function(){return!!s("transform")},csstransforms3d:function(){return!!s("perspective")},csstransitions:function(){return!!s("transition")},cssanimations:function(){return!!s("animation")}},c={};return l.csstransitions()&&(c.transition=new String(o("transition")),c.transition.end=h.transition.end[c.transition]),l.cssanimations()&&(c.animation=new String(o("animation")),c.animation.end=h.animation.end[c.animation]),l.csstransforms()&&(c.transform=new String(o("transform")),c.transform3d=l.csstransforms3d()),"ontouchstart"in i||i.DocumentTouch&&n instanceof i.DocumentTouch?c.touch=!0:c.touch=!1,i.PointerEvent||i.MSPointerEvent?c.pointer=!0:c.pointer=!1,c.prefixPointerEvent=function(t){return i.MSPointerEvent?"MSPointer"+t.charAt(9).toUpperCase()+t.substr(10):t},c}(),y={ease:l(.25,.1,.25,1),linear:l(0,0,1,1),"ease-in":l(.42,0,1,1),"ease-out":l(0,0,.58,1),"ease-in-out":l(.42,0,.58,1)};f.options={skin:null,classes:{base:"slidePanel",show:"slidePanel-show",loading:"slidePanel-loading",content:"slidePanel-content",dragging:"slidePanel-dragging",willClose:"slidePanel-will-close"},closeSelector:null,template:function(t){return'<div class="'+t.classes.base+" "+t.classes.base+"-"+t.direction+'"><div class="'+t.classes.content+'"></div></div>'},loading:{appendTo:"panel",template:function(t){return'<div class="'+t.classes.loading+'"></div>'},showCallback:function(t){this.$el.addClass(t.classes.loading+"-show")},hideCallback:function(t){this.$el.removeClass(t.classes.loading+"-show")}},contentFilter:function(t,n){return t},useCssTransforms3d:!0,useCssTransforms:!0,useCssTransitions:!0,dragTolerance:150,mouseDragHandler:null,mouseDrag:!0,touchDrag:!0,pointerDrag:!0,direction:"right",duration:"500",easing:"ease",beforeLoad:t.noop,afterLoad:t.noop,beforeShow:t.noop,afterShow:t.noop,onChange:t.noop,beforeChange:t.noop,beforeHide:t.noop,afterHide:t.noop,beforeDrag:t.noop,afterDrag:t.noop},t.extend(c.prototype,{initialize:function(t){this.options=t,this._instance=null,this._showed=!1,this._isLoading=!1,this.build()},setLength:function(){switch(this.options.direction){case"top":case"bottom":this._length=this.$panel.outerHeight();break;case"left":case"right":this._length=this.$panel.outerWidth()}},build:function(){if(!this._builded){var n=this.options,i=n.template.call(this,n),e=this;this.$panel=t(i).appendTo("body"),n.skin&&this.$panel.addClass(n.skin),this.$content=this.$panel.find("."+this.options.classes.content),n.closeSelector&&this.$panel.on("click",n.closeSelector,function(){return e.hide(),!1}),this.loading=new u(this),this.setLength(),this.setPosition(this.getHidePosition()),(n.mouseDrag||n.touchDrag||n.pointerDrag)&&(this.drag=new p(this)),this._builded=!0}},getHidePosition:function(){var n=this.options;if(n.useCssTransforms||n.useCssTransforms3d)switch(n.direction){case"top":case"left":return"-100";case"bottom":case"right":return"100"}else switch(n.direction){case"top":case"bottom":return parseFloat(100*-(this._length/t(i).height()),10);case"left":case"right":return parseFloat(100*-(this._length/t(i).width()),10)}},empty:function(){this._instance=null,this.$content.empty()},load:function(n){function i(t){t=s.contentFilter.call(this,t,n),e.$content.html(t),e.hideLoading(),e._instance=n,D.trigger(e,"afterLoad",n)}var e=this,s=n.options;this._instance;D.trigger(this,"beforeLoad",n),this.empty(),n.content?i(n.content):n.url?(this.showLoading(),t.ajax(n.url,n.settings||{}).done(function(t){i(t)})):i("")},showLoading:function(){var t=this;this.loading.show(function(){t._isLoading=!0})},hideLoading:function(){var t=this;this.loading.hide(function(){t._isLoading=!1})},show:function(n){this.build(),D.enter("show"),D.trigger(this,"beforeShow"),t("html").addClass(this.options.classes.base+"-html"),this.$panel.addClass(this.options.classes.show);var i=this;b["do"](this,0,function(){i._showed=!0,D.trigger(i,"afterShow"),t.isFunction(n)&&n.call(i)})},change:function(t){D.trigger(this,"beforeShow"),D.trigger(this,"onChange",t,this._instance),this.load(t),D.trigger(this,"afterShow")},revert:function(n){var i=this;b["do"](this,0,function(){t.isFunction(n)&&n.call(i)})},hide:function(n){D.leave("show"),D.trigger(this,"beforeHide");var i=this;b["do"](this,this.getHidePosition(),function(){i.$panel.removeClass(i.options.classes.show),i._showed=!1,i._instance=null,D._current===i&&(D._current=null),D.is("show")||t("html").removeClass(i.options.classes.base+"-html"),t.isFunction(n)&&n.call(i),D.trigger(i,"afterHide")})},makePositionStyle:function(t){var n,i="0",e="0";o(t)||r(t)||(t+="%"),this.options.useCssTransforms&&_.transform?("left"===this.options.direction||"right"===this.options.direction?i=t:e=t,n=_.transform.toString(),t=this.options.useCssTransforms3d&&_.transform3d?"translate3d("+i+","+e+",0)":"translate("+i+","+e+")"):n=this.options.direction;var s={};return s[n]=t,s},getPosition:function(t){var n;if(this.options.useCssTransforms&&_.transform){if(n=a(this.$panel.css(_.transform)),!n)return 0;n="left"===this.options.direction||"right"===this.options.direction?n[12]||n[4]:n[13]||n[5]}else n=this.$panel.css(this.options.direction),n=parseFloat(n.replace("px",""));return t!==!0&&(n=n/this._length*100),parseFloat(n,10)},setPosition:function(t){var n=this.makePositionStyle(t);this.$panel.css(n)}}),t.extend(u.prototype,{initialize:function(t){this._view=t,this.build()},build:function(){if(!this._builded){var n=this._view.options,i=n.loading.template.call(this,n);switch(this.$el=t(i),n.loading.appendTo){case"panel":this.$el.appendTo(this._view.$panel);break;case"body":this.$el.appendTo("body");break;default:this.$el.appendTo(n.loading.appendTo)}this._builded=!0}},show:function(n){this.build();var i=this._view.options;i.loading.showCallback.call(this,i),t.isFunction(n)&&n.call(this)},hide:function(n){var i=this._view.options;i.loading.hideCallback.call(this,i),t.isFunction(n)&&n.call(this)}});var b={prepareTransition:function(n,i,e,s,o){var r=[];i&&r.push(i),e&&(t.isNumeric(e)&&(e+="ms"),r.push(e)),s?r.push(s):r.push(this.easing.css),o&&r.push(o),n.css(_.transition,r.join(" "))},"do":function(n,e,o){D.enter("animating");var r=n.options.duration,a=n.options.easing||"ease",h=this,l=n.makePositionStyle(e);for(var c in l)break;if(n.options.useCssTransitions&&_.transition)setTimeout(function(){h.prepareTransition(n.$panel,c,r,a)},20),n.$panel.one(_.transition.end,function(){t.isFunction(o)&&o(),n.$panel.css(_.transition,""),D.leave("animating")}),setTimeout(function(){n.setPosition(e)},20);else{var u=s(),p=n.getPosition(),d=e,f=function(e){var s=(e-u)/n.options.duration;s>1&&(s=1),s=y[a].fn(s);var r=parseFloat(p+s*(d-p),10);n.setPosition(r),1===s?(i.cancelAnimationFrame(h._frameId),h._frameId=null,t.isFunction(o)&&o(),D.leave("animating")):h._frameId=i.requestAnimationFrame(f)};h._frameId=i.requestAnimationFrame(f)}}};t.extend(p.prototype,{initialize:function(t){this._view=t,this.options=t.options,this._drag={time:null,pointer:null},this.bindEvents()},bindEvents:function(){var n=this.options,i=this._view.$panel;n.mouseDrag&&(i.on(D.eventName("mousedown"),t.proxy(this.onDragStart,this)),i.on(D.eventName("dragstart selectstart"),function(){return!n.mouseDragHandler||t(event.target).is(n.mouseDragHandler)||t(event.target).parents(n.mouseDragHandler).length>0?!1:void 0})),n.touchDrag&&_.touch&&(i.on(D.eventName("touchstart"),t.proxy(this.onDragStart,this)),i.on(D.eventName("touchcancel"),t.proxy(this.onDragEnd,this))),n.pointerDrag&&_.pointer&&(i.on(D.eventName(_.prefixPointerEvent("pointerdown")),t.proxy(this.onDragStart,this)),i.on(D.eventName(_.prefixPointerEvent("pointercancel")),t.proxy(this.onDragEnd,this)))},onDragStart:function(i){var e=this;if(3!==i.which){var s=this.options;this._view.$panel.addClass(this.options.classes.dragging),this._position=this._view.getPosition(!0),this._drag.time=(new Date).getTime(),this._drag.pointer=this.pointer(i);var o=function(){D.enter("dragging"),D.trigger(e._view,"beforeDrag")};if(s.mouseDrag){if(s.mouseDragHandler&&!(t(i.target).is(s.mouseDragHandler)||t(i.target).parents(s.mouseDragHandler).length>0))return;t(n).on(D.eventName("mouseup"),t.proxy(this.onDragEnd,this)),t(n).one(D.eventName("mousemove"),t.proxy(function(){t(n).on(D.eventName("mousemove"),t.proxy(this.onDragMove,this)),o()},this))}s.touchDrag&&_.touch&&(t(n).on(D.eventName("touchend"),t.proxy(this.onDragEnd,this)),t(n).one(D.eventName("touchmove"),t.proxy(function(){t(n).on(D.eventName("touchmove"),t.proxy(this.onDragMove,this)),o()},this))),s.pointerDrag&&_.pointer&&(t(n).on(D.eventName(_.prefixPointerEvent("pointerup")),t.proxy(this.onDragEnd,this)),t(n).one(D.eventName(_.prefixPointerEvent("pointermove")),t.proxy(function(){t(n).on(D.eventName(_.prefixPointerEvent("pointermove")),t.proxy(this.onDragMove,this)),o()},this))),t(n).on(D.eventName("blur"),t.proxy(this.onDragEnd,this)),i.preventDefault()}},onDragMove:function(t){var n=this.distance(this._drag.pointer,this.pointer(t));D.is("dragging")&&(Math.abs(n)>this.options.dragTolerance?this._willClose!==!0&&(this._willClose=!0,this._view.$panel.addClass(this.options.classes.willClose)):this._willClose!==!1&&(this._willClose=!1,this._view.$panel.removeClass(this.options.classes.willClose)),D.is("dragging")&&(t.preventDefault(),this.move(n)))},onDragEnd:function(i){var e=this.distance(this._drag.pointer,this.pointer(i));t(n).off(D.eventName("mousemove mouseup touchmove touchend pointermove pointerup MSPointerMove MSPointerUp blur")),this._view.$panel.removeClass(this.options.classes.dragging),this._willClose===!0&&(this._willClose=!1,this._view.$panel.removeClass(this.options.classes.willClose)),D.is("dragging")&&(D.leave("dragging"),D.trigger(this._view,"afterDrag"),Math.abs(e)<this.options.dragTolerance?this._view.revert():D.hide())},pointer:function(t){var n={x:null,y:null};return t=t.originalEvent||t||i.event,t=t.touches&&t.touches.length?t.touches[0]:t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,t.pageX?(n.x=t.pageX,n.y=t.pageY):(n.x=t.clientX,n.y=t.clientY),n},distance:function(t,n){var i=this.options.direction;return"left"===i||"right"===i?n.x-t.x:n.y-t.y},move:function(t){var n=this._position+t;if("right"===this.options.direction||"bottom"===this.options.direction){if(0>n)return}else if(n>0)return;this.options.useCssTransforms||this.options.useCssTransforms3d||"right"!==this.options.direction&&"bottom"!==this.options.direction||(n=-n),this._view.setPosition(n+"px")}}),t.extend(d.prototype,{initialize:function(n){var i=arguments[1]||{};if("string"==typeof n)n={url:n};else if(n&&1==n.nodeType){var e=t(n);n={url:e.attr("href"),settings:e.data("settings")||{},options:e.data()||{}}}return n&&n.options?n.options=t.extend(!0,i,n.options):n.options=i,n.options=t.extend(!0,{},f.options,n.options),t.extend(this,n),this}});var D={_states:{},_views:{},_current:null,is:function(t){return this._states[t]&&this._states[t]>0},enter:function(t){this._states[t]===e&&(this._states[t]=0),this._states[t]++},leave:function(t){this._states[t]--},trigger:function(i,e){var s=Array.prototype.slice.call(arguments,2),o=[i].concat(s);t(n).trigger("slidePanel::"+e,o),t.isFunction(i.options[e])&&i.options[e].apply(i,s)},eventName:function(t){if("string"!=typeof t||""===t)return".slidepanel";t=t.split(" ");for(var n=t.length,i=0;n>i;i++)t[i]=t[i]+".slidepanel";return t.join(" ")},show:function(t){if(!(t instanceof d))switch(arguments.length){case 0:t=new d;break;case 1:t=new d(arguments[0]);break;case 2:t=new d(arguments[0],arguments[1])}var n=this.getView(t.options),i=this,e=function(){n.show(),n.load(t),i._current=n};null!==this._current?n===this._current?this._current.change(t):this._current.hide(e):e()},getView:function(t){var n=h(t);return this._views.hasOwnProperty(n)?this._views[n]:this._views[n]=new c(t)},hide:function(t){if(t){var n=this.getView(t.options);n.hide()}else if(null!==this._current){this._current.hide()}}};t.extend(f,{is:function(t){return D.is(t)},show:function(t,n){return D.show.apply(D,arguments),this},hide:function(){return D.hide.apply(D,arguments),this}}),t.fn.slidePanel=function(n){if("string"==typeof n){var i=n,e=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=t.data(this,"slidePanel");switch(n instanceof d||(n=new d(this,e),t.data(this,"slidePanel",n)),i){case"hide":D.hide(n);break;case"show":D.show(n)}})}return this.each(function(){t.data(this,"slidePanel")||(t.data(this,"slidePanel",new d(this,n)),t(this).on("click",function(n){var i=t.data(this,"slidePanel");D.show(i),n.preventDefault(),n.stopPropagation()}))})}}(jQuery,document,window);