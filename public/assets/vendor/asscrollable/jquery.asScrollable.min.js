/*!
 * flexitask-client (undefined)
 * Copyright 2016 2Pi Digital Technologies
 * Licensed under the undefined
 */
!function(t,e,s,i,n){"use strict";function r(){return"undefined"!=typeof t.performance&&t.performance.now?t.performance.now():Date.now()}function o(t){return"string"==typeof t&&-1!=t.indexOf("%")}function a(t){return 0>t?t=0:t>1&&(t=1),100*parseFloat(t).toFixed(4)+"%"}function l(t){return parseFloat(t.slice(0,-1)/100,10)}var h="asScrollable",c=0,f=function(){var e,s,i;return s=t.navigator.userAgent,(e=/(?=.+Mac OS X)(?=.+Firefox)/.test(s))?(i=/Firefox\/\d{2}\./.exec(s),i&&(i=i[0].replace(/\D+/g,"")),e&&+i>23):!1}(),d=s[h]=function(t,e){this.$element=s(e),t=this.options=s.extend({},d.defaults,t||{},this.$element.data("options")||{}),this.classes={wrap:t.namespace,content:t.namespace+"-content",container:t.namespace+"-container",bar:t.namespace+"-bar",barHide:t.namespace+"-bar-hide",skin:t.skin},this.attributes={vertical:{axis:"Y",overflow:"overflow-y",scroll:"scrollTop",scrollLength:"scrollHeight",pageOffset:"pageYOffset",ffPadding:"padding-right",length:"height",clientLength:"clientHeight",offset:"offsetHeight",crossLength:"width",crossClientLength:"clientWidth",crossOffset:"offsetWidth"},horizontal:{axis:"X",overflow:"overflow-x",scroll:"scrollLeft",scrollLength:"scrollWidth",pageOffset:"pageXOffset",ffPadding:"padding-bottom",length:"width",clientLength:"clientWidth",offset:"offsetWidth",crossLength:"height",crossClientLength:"clientHeight",crossOffset:"offsetHeight"}},this._states={},this.horizontal=null,this.vertical=null,this.$bar=null,this._frameId=null,this._timeoutId=null,this.instanceId=++c,this.easing=i.easing[this.options.easing]||i.easing.ease;var n=this.$element.css("position");this.options.containerSelector?(this.$container=this.$element.find(this.options.containerSelector),this.$wrap=this.$element,"static"==n&&this.$wrap.css("position","relative")):(this.$container=this.$element.wrap("<div>"),this.$wrap=this.$container.parent(),this.$wrap.height(this.$element.height()),"static"!==n?this.$wrap.css("position",n):this.$wrap.css("position","relative")),this.options.contentSelector?this.$content=this.$container.find(this.options.contentSelector):(this.$content=this.$container.wrap("<div>"),this.$container=this.$content.parent()),this.init()};d.defaults={namespace:h,skin:null,contentSelector:null,containerSelector:null,enabledClass:"is-enabled",disabledClass:"is-disabled",draggingClass:"is-dragging",hoveringClass:"is-hovering",scrollingClass:"is-scrolling",direction:"vertical",showOnHover:!0,showOnBarHover:!1,duration:500,easing:"ease-in",responsive:!0,throttle:20,scrollbar:{}},d.prototype={constructor:d,init:function(){switch(this.options.direction){case"vertical":this.vertical=!0;break;case"horizontal":this.horizontal=!0;break;case"both":this.horizontal=!0,this.vertical=!0;break;case"auto":var t=this.$element.css("overflow-x"),e=this.$element.css("overflow-y");"scroll"!==t&&"auto"!==t||(this.horizontal=!0),"scroll"!==e&&"auto"!==e||(this.vertical=!0)}(this.vertical||this.horizontal)&&(this.$wrap.addClass(this.classes.wrap),this.$container.addClass(this.classes.container),this.$content.addClass(this.classes.content),this.options.skin&&this.$wrap.addClass(this.classes.skin),this.$wrap.addClass(this.options.enabledClass),this.vertical&&(this.$wrap.addClass(this.classes.wrap+"-vertical"),this.initLayout("vertical"),this.createBar("vertical")),this.horizontal&&(this.$wrap.addClass(this.classes.wrap+"-horizontal"),this.initLayout("horizontal"),this.createBar("horizontal")),this.bindEvents())},bindEvents:function(){var e=this,i=this.options;i.responsive&&(s(t).on(this.eventNameWithId("orientationchange"),function(){e.update.call(e)}),s(t).on(this.eventNameWithId("resize"),this.throttle(function(){e.update.call(e)},i.throttle))),(this.horizontal||this.vertical)&&(this.$wrap.on(this.eventName("mouseenter"),function(){e.$wrap.addClass(e.options.hoveringClass),e.enter("hovering"),e.trigger("hover")}),this.$wrap.on(this.eventName("mouseleave"),function(){e.$wrap.removeClass(e.options.hoveringClass),e.is("hovering")&&(e.leave("hovering"),e.trigger("hovered"))}),i.showOnHover&&(i.showOnBarHover?this.$bar.on("asScrollbar::hover",function(){e.showBar(this.direction)}).on("asScrollbar::hovered",function(){e.hideBar(this.direction)}):(this.$element.on(h+"::hover",s.proxy(this.showBar,this)),this.$element.on(h+"::hovered",s.proxy(this.hideBar,this)))),this.$container.on(this.eventName("scroll"),function(){if(e.horizontal){var t=e.offsetLeft;e.offsetLeft=e.getOffset("horizontal"),t!==e.offsetLeft&&(e.trigger("scroll",e.getPercentOffset("horizontal"),"horizontal"),0===e.offsetLeft&&e.trigger("scrolltop","horizontal"),e.offsetLeft===e.getScrollLength("horizontal")&&e.trigger("scrollend","horizontal"))}if(e.vertical){var s=e.offsetTop;e.offsetTop=e.getOffset("vertical"),s!==e.offsetTop&&(e.trigger("scroll",e.getPercentOffset("vertical"),"vertical"),0===e.offsetTop&&e.trigger("scrolltop","vertical"),e.offsetTop===e.getScrollLength("vertical")&&e.trigger("scrollend","vertical"))}}),this.$element.on(h+"::scroll",function(t,s,i,n){e.is("scrolling")||(e.enter("scrolling"),e.$wrap.addClass(e.options.scrollingClass));var r=s.getBarApi(n);r.moveTo(a(i),!1,!0),clearTimeout(e._timeoutId),e._timeoutId=setTimeout(function(){e.$wrap.removeClass(e.options.scrollingClass),e.leave("scrolling")},200)}),this.$bar.on("asScrollbar::change",function(t,s,i){e.scrollTo(this.direction,a(i),!1,!0)}),this.$bar.on("asScrollbar::drag",function(){e.$wrap.addClass(e.options.draggingClass)}).on("asScrollbar::dragged",function(){e.$wrap.removeClass(e.options.draggingClass)}))},unbindEvents:function(){this.$wrap.off(this.eventName()),this.$element.off(h+"::scroll").off(h+"::hover").off(h+"::hovered"),this.$container.off(this.eventName()),s(t).off(this.eventNameWithId())},initLayout:function(t){"vertical"===t&&this.$container.css("height",this.$wrap.height());var e=this.attributes[t],s=this.$container[0],i=this.getBrowserScrollbarWidth(t),n=s.parentNode[e.crossClientLength];this.$content.css(e.crossLength,n+"px"),this.$container.css(e.crossLength,i+n+"px"),0===i&&f&&this.$container.css(e.ffPadding,16)},createBar:function(t){var e=s.extend(this.options.scrollbar,{namespace:this.classes.bar,direction:t,useCssTransitions:!1,keyboard:!1}),i=s("<div>");i.asScrollbar(e),this.options.showOnHover&&i.addClass(this.classes.barHide),i.appendTo(this.$wrap),this["$"+t]=i,null===this.$bar?this.$bar=i:this.$bar=this.$bar.add(i),this.updateBarHandle(t)},trigger:function(t){var e=Array.prototype.slice.call(arguments,1),s=[this].concat(e);this.$element.trigger(h+"::"+t,s),t=t.replace(/\b\w+\b/g,function(t){return t.substring(0,1).toUpperCase()+t.substring(1)});var i="on"+t;"function"==typeof this.options[i]&&this.options[i].apply(this,e)},is:function(t){return this._states[t]&&this._states[t]>0},enter:function(t){this._states[t]===n&&(this._states[t]=0),this._states[t]++},leave:function(t){this._states[t]--},eventName:function(t){if("string"!=typeof t||""===t)return"."+this.options.namespace;t=t.split(" ");for(var e=t.length,s=0;e>s;s++)t[s]=t[s]+"."+this.options.namespace;return t.join(" ")},eventNameWithId:function(t){if("string"!=typeof t||""===t)return this.options.namespace+"-"+this.instanceId;t=t.split(" ");for(var e=t.length,s=0;e>s;s++)t[s]=t[s]+"."+this.options.namespace+"-"+this.instanceId;return t.join(" ")},throttle:function(t,e){var s,i,n,r=Date.now||function(){return(new Date).getTime()},o=null,a=0,l=function(){a=r(),o=null,n=t.apply(s,i),s=i=null};return function(){var h=r(),c=e-(h-a);return s=this,i=arguments,0>=c?(clearTimeout(o),o=null,a=h,n=t.apply(s,i),s=i=null):o||(o=setTimeout(l,c)),n}},getBrowserScrollbarWidth:function(t){var s,i,n=this.attributes[t];return n.scrollbarWidth?n.scrollbarWidth:(s=e.createElement("div"),i=s.style,i.position="absolute",i.width="100px",i.height="100px",i.overflow="scroll",i.top="-9999px",e.body.appendChild(s),n.scrollbarWidth=s[n.offset]-s[n.clientLength],e.body.removeChild(s),n.scrollbarWidth)},getOffset:function(t){var e=this.attributes[t],s=this.$container[0];return s[e.pageOffset]||s[e.scroll]},getPercentOffset:function(t){return this.getOffset(t)/this.getScrollLength(t)},getContainerLength:function(t){return this.$container[0][this.attributes[t].clientLength]},getScrollLength:function(t){var e=this.$content[0][this.attributes[t].scrollLength];return e-this.getContainerLength(t)},scrollTo:function(t,e,s,i){var n=typeof e;"string"===n&&(o(e)&&(e=l(e)*this.getScrollLength(t)),e=parseFloat(e),n="number"),"number"===n&&this.move(t,e,s,i)},scrollBy:function(t,e,s,i){var n=typeof e;"string"===n&&(o(e)&&(e=l(e)*this.getScrollLength(t)),e=parseFloat(e),n="number"),"number"===n&&this.move(t,this.getOffset(t)+e,s,i)},move:function(e,s,i,n){if(this[e]===!0&&"number"==typeof s){var o=this;this.enter("moving"),0>s?s=0:s>this.getScrollLength(e)&&(s=this.getScrollLength(e));var a=this.attributes[e],l=function(){o.leave("moving")};if(n)this.$container[0][a.scroll]=s,i!==!1&&this.trigger("change",s/this.getScrollLength(e)),l();else{o.enter("animating");var h=r(),c=o.getOffset(e),f=s,d=function(n){var r=(n-h)/o.options.duration;r>1&&(r=1),r=o.easing.fn(r);var g=parseFloat(c+r*(f-c),10);o.$container[0][a.scroll]=g,i!==!1&&o.trigger("change",s/o.getScrollLength(e)),1===r?(t.cancelAnimationFrame(o._frameId),o._frameId=null,o.leave("animating"),l()):o._frameId=t.requestAnimationFrame(d)};o._frameId=t.requestAnimationFrame(d)}}},scrollXto:function(t,e,s){return this.scrollTo("horizontal",t,e,s)},scrollYto:function(t,e,s){return this.scrollTo("vertical",t,e,s)},scrollXby:function(t,e,s){return this.scrollBy("horizontal",t,e,s)},scrollYby:function(t,e,s){return this.scrollBy("vertical",t,e,s)},getBar:function(t){return t&&this["$"+t]?this["$"+t]:this.$bar},getBarApi:function(t){return this.getBar(t).data("asScrollbar")},getBarX:function(){return this.getBar("horizontal")},getBarY:function(){return this.getBar("vertical")},showBar:function(t){this.getBar(t).removeClass(this.classes.barHide)},hideBar:function(t){this.getBar(t).addClass(this.classes.barHide)},updateBarHandle:function(t){var e=this.getBarApi(t),s=this.getScrollLength(t),i=this.getContainerLength(t);s>0?(e.is("disabled")&&e.enable(),e.setHandleLength(e.getBarLength()*i/(s+i),!0)):e.disable()},disable:function(){this.is("disabled")||(this.enter("disabled"),this.$wrap.addClass(this.options.disabledClass).removeClass(this.options.enabledClass),this.unbindEvents(),this.unStyle())},enable:function(){this.is("disabled")&&(this.leave("disabled"),this.$wrap.addClass(this.options.enabledClass).removeClass(this.options.disabledClass),this.bindEvents(),this.update())},update:function(){this.is("disabled")||(this.vertical&&(this.initLayout("vertical"),this.updateBarHandle("vertical")),this.horizontal&&(this.initLayout("horizontal"),this.updateBarHandle("horizontal")))},unStyle:function(){this.horizontal&&(this.$container.css({height:"","padding-bottom":""}),this.$content.css({height:""})),this.vertical&&(this.$container.css({width:"",height:"","padding-right":""}),this.$content.css({width:""})),this.options.containerSelector||this.$wrap.css({height:""})},destory:function(){this.$wrap.removeClass(this.classes.wrap+"-vertical").removeClass(this.classes.wrap+"-horizontal").removeClass(this.classes.wrap).removeClass(this.options.enabledClass).removeClass(this.classes.disabledClass),this.unStyle(),this.$bar&&this.$bar.remove(),this.unbindEvents(),this.options.containerSelector?this.$container.removeClass(this.classes.container):this.$container.unwrap(),this.options.contentSelector||this.$content.unwrap(),this.$content.removeClass(this.classes.content),this.$element.data(h,null)}},s.fn[h]=function(t){if("string"!=typeof t)return this.each(function(){s(this).data(h)?s(this).data(h).update():s(this).data(h,new d(t,this))});var e=t,i=Array.prototype.slice.call(arguments,1);if(/^\_/.test(e))return!1;if(!/^(get)/.test(e))return this.each(function(){var t=s.data(this,h);t&&"function"==typeof t[e]&&t[e].apply(t,i)});var n=this.first().data(h);return n&&"function"==typeof n[e]?n[e].apply(n,i):this}}(window,document,jQuery,function(t){"use strict";return void 0===t.asScrollbar?!1:t.asScrollbar}(jQuery));