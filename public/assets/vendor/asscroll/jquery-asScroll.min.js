/*!
 * flexitask-client (undefined)
 * Copyright 2016 2Pi Digital Technologies
 * Licensed under the undefined
 */
!function(t,e,n,i){"use strict";var s=0,o=function(){return"undefined"!=typeof t.performance&&t.performance.now?t.performance.now():Date.now()},r=function(t){return"string"==typeof t&&-1!==t.indexOf("%")},a=function(t){return parseFloat(t.slice(0,-1)/100,10)},l=function(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||function(e){t.setTimeout(e,1e3/60)}}(),c=function(){return t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.mozCancelAnimationFrame||function(e){t.clearTimeout(e)}}(),h=function(t,e,n,i){function s(t,e){return 1-3*e+3*t}function o(t,e){return 3*e-6*t}function r(t){return 3*t}function a(t,e,n){return((s(e,n)*t+o(e,n))*t+r(e))*t}function l(t,e,n){return 3*s(e,n)*t*t+2*o(e,n)*t+r(e)}function c(e){for(var i=e,s=0;4>s;++s){var o=l(i,t,n);if(0===o)return i;var r=a(i,t,n)-e;i-=r/o}return i}return t===e&&n===i?{css:"linear",fn:function(t){return t}}:{css:"cubic-bezier("+t+","+e+","+n+","+i+")",fn:function(t){return a(c(t),e,i)}}},f=function(i,o){this.element=i,this.$element=n(i),this.options=n.extend(!0,{},f.defaults,o),this.options.containerSelector?this.$container=n(this.options.containerSelector):this.$container=this.$element.is(e.body)?n(t):this.$element.parent(),1===this.$container.length&&(this.namespace=this.options.namespace,this.attributes={vertical:{axis:"Y",overflow:"overflow-y",scroll:"scrollTop",scrollLength:"scrollHeight",pageOffset:"pageYOffset",ffPadding:"padding-right",length:"height",clientLength:"clientHeight",offsetLength:"offsetHeight",offset:"top",crossOffset:"left",crossLength:"width",crossClientLength:"clientWidth",crossOffsetLength:"offsetWidth"},horizontal:{axis:"X",overflow:"overflow-x",scroll:"scrollLeft",scrollLength:"scrollWidth",pageOffset:"pageXOffset",ffPadding:"padding-bottom",length:"width",clientLength:"clientWidth",offsetLength:"offsetWidth",offset:"left",crossOffset:"top",crossLength:"height",crossClientLength:"clientHeight",crossOffsetLength:"offsetHeight"}},this.classes={},this.easing=f.easing[this.options.easing]||f.easing.ease,this.duration=this.options.duration,this._frameId=null,this._states={},this.instanceId=++s,this.vertical=!1,this.horizontal=!1,this.init())};n.extend(f.easing={},{ease:h(.25,.1,.25,1),linear:h(0,0,1,1),"ease-in":h(.42,0,1,1),"ease-out":h(0,0,.58,1),"ease-in-out":h(.42,0,.58,1)}),f.prototype={constructor:f,getActiveTarget:function(t){if(this[t]){var e=this.getOffset(t),i=this.attributes[t],s=null,o=this.getContainerLength(t);return n.each(this.lists,function(t,n){var r=n.offset[i.offset],a=n.$el[i.length]();return r===e?(s=t,!1):r>e&&e+o>r?(s=t,!1):e>r&&r+a>e?(s=t,!0):r>e+o?!1:void 0}),s}},init:function(){var t=this;this.$targets=this.$element.find("[data-scroll-target]"),this.lists={},this.getScrollLength("vertical")>0&&(this.vertical=!0),this.getScrollLength("horizontal")>0&&(this.horizontal=!0),this.$targets.each(function(){var e=n(this);t.lists[e.data("scrollTarget")]={$el:e,offset:e.offset()}}),this.bindEvents()},bindEvents:function(){var e=this;n(t).on(this.eventNameWithId("resize"),function(){n(t).width()<e.options.mobile.width&&(e.duration=e.options.duration,e.easing=f.easing[e.options.easing]||f.easing.ease)}),n(t).on(this.eventNameWithId("orientationchange"),function(){n(t).width()<e.options.mobile.width&&(e.duration=e.options.duration,e.easing=f.easing[e.options.easing]||f.easing.ease)}),(this.horizontal||this.vertical)&&this.$container.on(this.eventName("scroll"),function(){e.vertical&&e.trigger(e.eventName("active"),["vertical",e.getActiveTarget("vertical")]),e.horizontal&&e.trigger(e.eventName("active"),["horizontal",e.getActiveTarget("horizontal")])})},eventName:function(t){if("string"!=typeof t||""===t)return"."+this.options.namespace;t=t.split(" ");for(var e=t.length,n=0;e>n;n++)t[n]=t[n]+"."+this.options.namespace;return t.join(" ")},eventNameWithId:function(t){if("string"!=typeof t||""===t)return this.options.namespace+"-"+this.instanceId;t=t.split(" ");for(var e=t.length,n=0;e>n;n++)t[n]=t[n]+"."+this.options.namespace+"-"+this.instanceId;return t.join(" ")},trigger:function(t){var e=Array.prototype.slice.call(arguments,1),n=[this].concat(e);this.$element.trigger("AsScroll::"+t,n),t=t.replace(/\b\w+\b/g,function(t){return t.substring(0,1).toUpperCase()+t.substring(1)});var i="on"+t;"function"==typeof this.options[i]&&this.options[i].apply(this,e)},is:function(t){return this._states[t]&&this._states[t]>0},enter:function(t){this._states[t]===i&&(this._states[t]=0),this._states[t]++},leave:function(t){this._states[t]--},getOffset:function(t){var e=this.attributes[t],n=this.$element[0];return n[e.pageOffset]||n[e.scroll]},getPercentOffset:function(t){return this.getOffset(t)/this.getScrollLength(t)},getContainerLength:function(e){return this.$container[0]===t?this.$container[this.attributes[e].length]():this.$container[0][this.attributes[e].clientLength]},getScrollLength:function(t){var e=this.$element[0][this.attributes[t].scrollLength];return e-this.getContainerLength(t)},scrollToTarget:function(t,e,n,i){if("undefined"!=typeof this.lists[e]){e=this.lists[e];var s=this.attributes[t],o=e.offset[s.offset];this.scrollTo(t,o,n,i)}},scrollTo:function(t,e,n,i){var s=typeof e;"string"===s&&(r(e)&&(e=a(e)*this.getScrollLength(t)),e=parseFloat(e),s="number"),"number"===s&&this.move(t,e,n,i)},scrollBy:function(t,e,n,i){var s=typeof e;"string"===s&&(r(e)&&(e=a(e)*this.getScrollLength(t)),e=parseFloat(e),s="number"),"number"===s&&this.move(t,this.getOffset(t)+e,n,i)},move:function(t,e,n,i){if(this[t]&&"number"==typeof e){var s=this;this.enter("moving"),0>e?e=0:e>this.getScrollLength(t)&&(e=this.getScrollLength(t));var r=this.attributes[t],a=function(){s.leave("moving")};if(i)this.$element[0][r.scroll]=e,n!==!1&&this.trigger("change",e/this.getScrollLength(t)),a();else{s.enter("animating");var h=o(),f=s.getOffset(t),u=e,g=function(i){var o=(i-h)/s.duration;o>1&&(o=1),o=s.easing.fn(o);var p=parseFloat(f+o*(u-f),10);s.$element[0][r.scroll]=p,n!==!1&&s.trigger("change",e/s.getScrollLength(t)),1===o?(c(s._frameId),s._frameId=null,s.leave("animating"),a()):s._frameId=l(g)};s._frameId=l(g)}}},scrollXto:function(t,e,n){return this.scrollTo("horizontal",t,e,n)},scrollYto:function(t,e,n){return this.scrollTo("vertical",t,e,n)},scrollXby:function(t,e,n){return this.scrollBy("horizontal",t,e,n)},scrollYby:function(t,e,n){return this.scrollBy("vertical",t,e,n)},scrollXToTarget:function(t,e,n){return this.scrollToTarget("horizontal",t,e,n)},scrollYToTarget:function(t,e,n){return this.scrollToTarget("vertical",t,e,n)}},f.defaults={duration:800,easing:"ease",namespace:"asScroll",offsetTop:50,mobile:{width:768,duration:500,easing:"ease"}},n.fn.asScroll=function(t){if("string"==typeof t){var e=t,i=Array.prototype.slice.call(arguments,1);return this.each(function(){var t=n.data(this,"asScroll");t&&"function"==typeof t[e]&&t[e].apply(t,i)})}return this.each(function(){var e=n.data(this,"asScroll");e||(e=new f(this,t),n.data(this,"asScroll",e))})}}(window,document,jQuery);