/*!
 * flexitask-client (undefined)
 * Copyright 2016 2Pi Digital Technologies
 * Licensed under the undefined
 */
!function(t,e,i){"use strict";!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(t.jQuery)}(function(t){function i(e,i){this.$element=t(e),i&&("string"!==t.type(i.delay)&&"number"!==t.type(i.delay)||(i.delay={show:i.delay,hide:i.delay})),this.options=t.extend({},r,i),this._defaults=r,this._name=o,this._targetclick=!1,this.init(),h.push(this.$element)}var o="webuiPopover",n="webui-popover",s="webui.popover",r={placement:"auto",container:null,width:"auto",height:"auto",trigger:"click",style:"",delay:{show:null,hide:null},async:{type:"GET",before:null,success:null,error:null},cache:!0,multi:!1,arrow:!0,title:"",content:"",closeable:!1,padding:!0,url:"",type:"html",animation:null,template:'<div class="webui-popover"><div class="webui-arrow"></div><div class="webui-popover-inner"><a href="#" class="close"></a><h3 class="webui-popover-title"></h3><div class="webui-popover-content"><i class="icon-refresh"></i> <p>&nbsp;</p></div></div></div>',backdrop:!1,dismissible:!0,onShow:null,onHide:null,abortXHR:!0,autoHide:!1,offsetTop:0,offsetLeft:0,iframeOptions:{frameborder:"0",allowtransparency:"true",id:"",name:"",scrolling:"",onload:"",height:"",width:""}},h=[],a=t('<div class="webui-popover-backdrop"></div>'),l=0,p=!1,c=-2e3,f=t(e),g=function(t,e){return isNaN(t)?e||0:Number(t)},d=function(t){return t.data("plugin_"+o)},u=function(){for(var t=null,e=0;e<h.length;e++)t=d(h[e]),t&&t.hide(!0);f.trigger("hiddenAll."+s)},m="ontouchstart"in e.documentElement&&/Mobi/.test(navigator.userAgent),y=function(t){var e={x:0,y:0};if("touchstart"===t.type||"touchmove"===t.type||"touchend"===t.type||"touchcancel"===t.type){var i=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0];e.x=i.pageX,e.y=i.pageY}else"mousedown"!==t.type&&"mouseup"!==t.type&&"click"!==t.type||(e.x=t.pageX,e.y=t.pageY);return e};i.prototype={init:function(){"click"===this.getTrigger()||m?this.$element.off("click touchend").on("click touchend",t.proxy(this.toggle,this)):"hover"===this.getTrigger()&&this.$element.off("mouseenter mouseleave click").on("mouseenter",t.proxy(this.mouseenterHandler,this)).on("mouseleave",t.proxy(this.mouseleaveHandler,this)),this._poped=!1,this._inited=!0,this._opened=!1,this._idSeed=l,this.options.container=t(this.options.container||e.body).first(),this.options.backdrop&&a.appendTo(this.options.container).hide(),l++,"sticky"===this.getTrigger()&&this.show()},destroy:function(){for(var t=-1,e=0;e<h.length;e++)if(h[e]===this.$element){t=e;break}h.splice(t,1),this.hide(),this.$element.data("plugin_"+o,null),"click"===this.getTrigger()?this.$element.off("click"):"hover"===this.getTrigger()&&this.$element.off("mouseenter mouseleave"),this.$target&&this.$target.remove()},hide:function(e,i){if((e||"sticky"!==this.getTrigger())&&this._opened){i&&(i.preventDefault(),i.stopPropagation()),this.xhr&&this.options.abortXHR===!0&&(this.xhr.abort(),this.xhr=null);var o=t.Event("hide."+s);if(this.$element.trigger(o,[this.$target]),this.$target){this.$target.removeClass("in").addClass(this.getHideAnimation());var n=this;setTimeout(function(){n.$target.hide()},300)}this.options.backdrop&&a.hide(),this._opened=!1,this.$element.trigger("hidden."+s,[this.$target]),this.options.onHide&&this.options.onHide(this.$target)}},resetAutoHide:function(){var t=this,e=t.getAutoHide();e&&(t.autoHideHandler&&clearTimeout(t.autoHideHandler),t.autoHideHandler=setTimeout(function(){t.hide()},e))},toggle:function(t){t&&(t.preventDefault(),t.stopPropagation()),this[this.getTarget().hasClass("in")?"hide":"show"]()},hideAll:function(){u()},show:function(){var t=this.getTarget().removeClass().addClass(n).addClass(this._customTargetClass);this.options.multi||this.hideAll(),this._opened||(this.getCache()&&this._poped&&""!==this.content||(this.content="",this.setTitle(this.getTitle()),this.options.closeable||t.find(".close").off("click").remove(),this.isAsync()?this.setContentASync(this.options.content):this.setContent(this.getContent()),t.show()),this.displayContent(),this.options.onShow&&this.options.onShow(t),this.bindBodyEvents(),this.options.backdrop&&a.show(),this._opened=!0,this.resetAutoHide())},displayContent:function(){var e=this.getElementPosition(),i=this.getTarget().removeClass().addClass(n).addClass(this._customTargetClass),o=this.getContentElement(),r=i[0].offsetWidth,h=i[0].offsetHeight,a="bottom",l=t.Event("show."+s);this.$element.trigger(l,[i]);var p=this.$element.data("width")||this.options.width;""===p&&(p=this._defaults.width),"auto"!==p&&i.width(p);var f=this.$element.data("height")||this.options.height;""===f&&(f=this._defaults.height),"auto"!==f&&o.height(f),this.options.style&&this.$target.addClass(n+"-"+this.options.style),this.options.arrow||i.find(".webui-arrow").remove(),i.detach().css({top:c,left:c,display:"block"}),this.getAnimation()&&i.addClass(this.getAnimation()),i.appendTo(this.options.container),a=this.getPlacement(e),this.$element.trigger("added."+s),this.initTargetEvents(),this.options.padding||("auto"!==this.options.height&&o.css("height",o.outerHeight()),this.$target.addClass("webui-no-padding")),r=i[0].offsetWidth,h=i[0].offsetHeight;var g=this.getTargetPositin(e,a,r,h);if(this.$target.css(g.position).addClass(a).addClass("in"),"iframe"===this.options.type){var d=i.find("iframe"),u=i.width(),m=d.parent().height();""!==this.options.iframeOptions.width&&"auto"!==this.options.iframeOptions.width&&(u=this.options.iframeOptions.width),""!==this.options.iframeOptions.height&&"auto"!==this.options.iframeOptions.height&&(m=this.options.iframeOptions.height),d.width(u).height(m)}if(this.options.arrow||this.$target.css({margin:0}),this.options.arrow){var y=this.$target.find(".webui-arrow");y.removeAttr("style"),"left"===a||"right"===a?y.css({top:this.$target.height()/2}):"top"!==a&&"bottom"!==a||y.css({left:this.$target.width()/2}),g.arrowOffset&&(-1===g.arrowOffset.left||-1===g.arrowOffset.top?y.hide():y.css(g.arrowOffset))}this._poped=!0,this.$element.trigger("shown."+s,[this.$target])},isTargetLoaded:function(){return 0===this.getTarget().find("i.glyphicon-refresh").length},getTriggerElement:function(){return this.$element},getTarget:function(){if(!this.$target){var e=o+this._idSeed;this.$target=t(this.options.template).attr("id",e).data("trigger-element",this.getTriggerElement()),this._customTargetClass=this.$target.attr("class")!==n?this.$target.attr("class"):null,this.getTriggerElement().attr("data-target",e)}return this.$target},getTitleElement:function(){return this.getTarget().find("."+n+"-title")},getContentElement:function(){return this.$contentElement||(this.$contentElement=this.getTarget().find("."+n+"-content")),this.$contentElement},getTitle:function(){return this.$element.attr("data-title")||this.options.title||this.$element.attr("title")},getUrl:function(){return this.$element.attr("data-url")||this.options.url},getAutoHide:function(){return this.$element.attr("data-auto-hide")||this.options.autoHide},getOffsetTop:function(){return g(this.$element.attr("data-offset-top"))||this.options.offsetTop},getOffsetLeft:function(){return g(this.$element.attr("data-offset-left"))||this.options.offsetLeft},getCache:function(){var t=this.$element.attr("data-cache");if("undefined"!=typeof t)switch(t.toLowerCase()){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":return!1}return this.options.cache},getTrigger:function(){return this.$element.attr("data-trigger")||this.options.trigger},getDelayShow:function(){var t=this.$element.attr("data-delay-show");return"undefined"!=typeof t?t:0===this.options.delay.show?0:this.options.delay.show||100},getHideDelay:function(){var t=this.$element.attr("data-delay-hide");return"undefined"!=typeof t?t:0===this.options.delay.hide?0:this.options.delay.hide||100},getAnimation:function(){var t=this.$element.attr("data-animation");return t||this.options.animation},getHideAnimation:function(){var t=this.getAnimation();return t?t+"-out":"out"},setTitle:function(t){var e=this.getTitleElement();t?e.html(t):e.remove()},hasContent:function(){return this.getContent()},getIframe:function(){var e=t("<iframe></iframe>").attr("src",this.getUrl()),i=this;return t.each(this._defaults.iframeOptions,function(t){"undefined"!=typeof i.options.iframeOptions[t]&&e.attr(t,i.options.iframeOptions[t])}),e},getContent:function(){if(this.getUrl())switch(this.options.type){case"iframe":this.content=this.getIframe();break;case"html":try{this.content=t(this.getUrl()),this.content.is(":visible")||this.content.show()}catch(e){throw new Error("Unable to get popover content. Invalid selector specified.")}}else if(!this.content){var i="";if(i=t.isFunction(this.options.content)?this.options.content.apply(this.$element[0],[this]):this.options.content,this.content=this.$element.attr("data-content")||i,!this.content){var o=this.$element.next();o&&o.hasClass(n+"-content")&&(this.content=o)}}return this.content},setContent:function(t){var e=this.getTarget(),i=this.getContentElement();"string"==typeof t?i.html(t):t instanceof jQuery&&(i.html(""),this.options.cache?t.removeClass(n+"-content").appendTo(i):t.clone(!0,!0).removeClass(n+"-content").appendTo(i)),this.$target=e},isAsync:function(){return"async"===this.options.type},setContentASync:function(e){var i=this;this.xhr||(this.xhr=t.ajax({url:this.getUrl(),type:this.options.async.type,cache:this.getCache(),beforeSend:function(t){i.options.async.before&&i.options.async.before(i,t)},success:function(o){i.bindBodyEvents(),e&&t.isFunction(e)?i.content=e.apply(i.$element[0],[o]):i.content=o,i.setContent(i.content);var n=i.getContentElement();n.removeAttr("style"),i.displayContent(),i.options.async.success&&i.options.async.success(i,o)},complete:function(){i.xhr=null},error:function(t,e){i.options.async.error&&i.options.async.error(i,t,e)}}))},bindBodyEvents:function(){p||(this.options.dismissible&&"click"===this.getTrigger()?(f.off("keyup.webui-popover").on("keyup.webui-popover",t.proxy(this.escapeHandler,this)),f.off("click.webui-popover touchend.webui-popover").on("click.webui-popover touchend.webui-popover",t.proxy(this.bodyClickHandler,this))):"hover"===this.getTrigger()&&f.off("touchend.webui-popover").on("touchend.webui-popover",t.proxy(this.bodyClickHandler,this)))},mouseenterHandler:function(){var t=this;t._timeout&&clearTimeout(t._timeout),t._enterTimeout=setTimeout(function(){t.getTarget().is(":visible")||t.show()},this.getDelayShow())},mouseleaveHandler:function(){var t=this;clearTimeout(t._enterTimeout),t._timeout=setTimeout(function(){t.hide()},this.getHideDelay())},escapeHandler:function(t){27===t.keyCode&&this.hideAll()},bodyClickHandler:function(t){p=!0;for(var e=!0,i=0;i<h.length;i++){var o=d(h[i]);if(o&&o._opened){var n=o.getTarget().offset().left,s=o.getTarget().offset().top,r=o.getTarget().offset().left+o.getTarget().width(),a=o.getTarget().offset().top+o.getTarget().height(),l=y(t),c=l.x>=n&&l.x<=r&&l.y>=s&&l.y<=a;if(c){e=!1;break}}}e&&u()},initTargetEvents:function(){"hover"===this.getTrigger()&&this.$target.off("mouseenter mouseleave").on("mouseenter",t.proxy(this.mouseenterHandler,this)).on("mouseleave",t.proxy(this.mouseleaveHandler,this)),this.$target.find(".close").off("click").on("click",t.proxy(this.hide,this,!0))},getPlacement:function(t){var e,i=this.options.container,o=i.innerWidth(),n=i.innerHeight(),s=i.scrollTop(),r=i.scrollLeft(),h=Math.max(0,t.left-r),a=Math.max(0,t.top-s);e="function"==typeof this.options.placement?this.options.placement.call(this,this.getTarget()[0],this.$element[0]):this.$element.data("placement")||this.options.placement;var l="horizontal"===e,p="vertical"===e,c="auto"===e||l||p;return c?e=o/3>h?n/3>a?l?"right-bottom":"bottom-right":2*n/3>a?p?n/2>=a?"bottom-right":"top-right":"right":l?"right-top":"top-right":2*o/3>h?n/3>a?l?o/2>=h?"right-bottom":"left-bottom":"bottom":2*n/3>a?l?o/2>=h?"right":"left":n/2>=a?"bottom":"top":l?o/2>=h?"right-top":"left-top":"top":n/3>a?l?"left-bottom":"bottom-left":2*n/3>a?p?n/2>=a?"bottom-left":"top-left":"left":l?"left-top":"top-left":"auto-top"===e?e=o/3>h?"top-right":2*o/3>h?"top":"top-left":"auto-bottom"===e?e=o/3>h?"bottom-right":2*o/3>h?"bottom":"bottom-left":"auto-left"===e?e=n/3>a?"left-top":2*n/3>a?"left":"left-bottom":"auto-right"===e&&(e=n/3>a?"right-top":2*n/3>a?"right":"right-bottom"),e},getElementPosition:function(){return t.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTargetPositin:function(t,e,i,o){var n=t,s=this.options.container,r=s.innerWidth(),h=s.innerHeight(),a=this.$element.outerWidth(),l=this.$element.outerHeight(),p=s.scrollTop(),f=s.scrollLeft(),g={},d=null,u=this.options.arrow?20:0,m=10,y=u+m>a?u:0,v=u+m>l?u:0,b=0,w=h+p,$=r+f,T=n.left+n.width/2-y>0,C=n.left+n.width/2+y<$,k=n.top+n.height/2-v>0,H=n.top+n.height/2+v<w;switch(e){case"bottom":g={top:n.top+n.height,left:n.left+n.width/2-i/2};break;case"top":g={top:n.top-o,left:n.left+n.width/2-i/2};break;case"left":g={top:n.top+n.height/2-o/2,left:n.left-i};break;case"right":g={top:n.top+n.height/2-o/2,left:n.left+n.width};break;case"top-right":g={top:n.top-o,left:T?n.left-y:m},d={left:T?Math.min(a,i)/2+y:c};break;case"top-left":b=C?y:-m,g={top:n.top-o,left:n.left-i+n.width+b},d={left:C?i-Math.min(a,i)/2-y:c};break;case"bottom-right":g={top:n.top+n.height,left:T?n.left-y:m},d={left:T?Math.min(a,i)/2+y:c};break;case"bottom-left":b=C?y:-m,g={top:n.top+n.height,left:n.left-i+n.width+b},d={left:C?i-Math.min(a,i)/2-y:c};break;case"right-top":b=H?v:-m,g={top:n.top-o+n.height+b,left:n.left+n.width},d={top:H?o-Math.min(l,o)/2-v:c};break;case"right-bottom":g={top:k?n.top-v:m,left:n.left+n.width},d={top:k?Math.min(l,o)/2+v:c};break;case"left-top":b=H?v:-m,g={top:n.top-o+n.height+b,left:n.left-i},d={top:H?o-Math.min(l,o)/2-v:c};break;case"left-bottom":g={top:k?n.top-v:m,left:n.left-i},d={top:k?Math.min(l,o)/2+v:c}}return g.top+=this.getOffsetTop(),g.left+=this.getOffsetLeft(),{position:g,arrowOffset:d}}},t.fn[o]=function(e,n){var s=[],r=this.each(function(){var r=t.data(this,"plugin_"+o);r?"destroy"===e?r.destroy():"string"==typeof e&&s.push(r[e]()):(e?"string"==typeof e?"destroy"!==e&&(n||(r=new i(this,null),s.push(r[e]()))):"object"==typeof e&&(r=new i(this,e)):r=new i(this,null),t.data(this,"plugin_"+o,r))});return s.length?s:r}})}(window,document);