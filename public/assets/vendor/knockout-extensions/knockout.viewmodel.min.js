/*!
 * flexitask-client (undefined)
 * Copyright 2016 2Pi Digital Technologies
 * Licensed under the undefined
 */
!function(){function n(n,e){var t=n?n[e.full]||n[e.parent]||n[e.name]||{}:{};return a&&a(e,t,n),t}function e(n){var e,t,o,r,i,u,l,a,s={},f=n?n.shared||{}:{};for(u in n)if(e=n[u]||{},"shared"!==u)if(e instanceof Array)for(o=0,i=e.length;i>o;o++)r=e[o],s[r]=s[r]||{},s[r][u]=!0,s[r].settingType=s[r].settingType?"multiple":u;else if(e.constructor===Object)for(r in e){if(s[r]=s[r]||{},t=e[r],t="arrayChildId"!==u&&t&&t.constructor===String&&f[t]?f[t]:t,t&&t.constructor===Object)for(l in t)(a=t[l])&&a.constructor==String&&f[a]&&(t[l]=f[a]);s[r][u]=t,s[r].settingType=s[r].settingType?"multiple":u}return s}function t(n){return null===n||void 0===n}function o(n){return null===n||void 0===n||n.constructor===String||n.constructor===Number||n.constructor===Boolean||n instanceof Date}function r(e,u,l,a){var f,c,_,h,y,v,C,$,g,b,M;if(a=a||n(u,l),C=a.custom)g=!0,"function"==typeof C?(c=C(e),t(c)||(c.___$mapCustom=C)):(c=C.map(e),t(c)||(c.___$mapCustom=C.map,C.unmap&&(c.___$unmapCustom=C.unmap)));else if(a.append)g=!0,c=e;else{if(a.exclude)return g=!0,d;if(o(e))c=l.parentIsArray?e:m(e);else if(e instanceof Array){for(c=[],_=0,h=e.length;h>_;_++)c[_]=r(e[_],u,{name:"[i]",parent:l.name+"[i]",full:l.full+"[i]",parentIsArray:!0});l.parentIsArray&&!s||(v={name:"[i]",parent:l.name+"[i]",full:l.full+"[i]",parentIsArray:!0},c=p(c),(y=a.arrayChildId)&&(c.___$childIdName=y),c.pushFromModel=function(n){n=r(n,u,v),c.push(n)},c.unshiftFromModel=function(n){n=r(n,u,v),c.unshift(n)},c.popToModel=function(n){return n=c.pop(),i(n,v)},c.shiftToModel=function(n){return n=c.shift(),i(n,v)})}else if(e.constructor===Object){c={};for(_ in e)v={name:_,parent:("[i]"===l.name?l.parent:l.name)+"."+_,full:l.full+"."+_},M=e[_],b=o(M)?n(u,v):void 0,b&&b.custom?(c.___$customChildren=c.___$customChildren||{},c.___$customChildren[_]=b.custom,"function"==typeof b.custom?c[_]=b.custom(e[_]):c[_]=b.custom.map(e[_])):(f=r(M,u,v,b),f!==d&&(c[_]=f))}}return!g&&($=a.extend)&&("function"==typeof $?c=$(c)||c:$.constructor===Object&&("function"==typeof $.map&&(c=$.map(c)||c),"function"==typeof $.unmap&&(c.___$unmapExtend=$.unmap))),c}function i(n,e){var r,u,l,s,c,m,p=f(n),_=n!==p;if(a&&a(e),!_&&n&&n.constructor===Function)return d;if(n&&n.___$unmapCustom)r=n.___$unmapCustom(n);else if(_&&o(p)||t(p))r=p;else if(p instanceof Array)for(r=[],u=0,l=p.length;l>u;u++)r[u]=i(p[u],{name:"[i]",parent:e.name+"[i]",full:e.full+"[i]"});else if(p.constructor===Object){r={};for(u in p)"___$"!==u.substr(0,4)&&(n.___$customChildren&&n.___$customChildren[u]&&n.___$customChildren[u].unmap?r[u]=n.___$customChildren[u].unmap(p[u]):(c=p[u],ko.isComputed(c)||(s=f(c))&&s.constructor===Function||(m=i(c,{name:u,parent:("[i]"===e.name?e.parent:e.name)+"."+u,full:e.full+"."+u}),m!==d&&(r[u]=m))))}else _||"function"==typeof p||(r=p);return n&&n.___$unmapExtend&&(r=n.___$unmapExtend(r,n)),r}function u(n,e,r,i,l){var s,m,p,_,d,h,y,v,C,$,g,b,M,O,k,A=f(e),T=e!==A;if(a&&a(r),T&&t(A)^t(n))e(n);else if(n&&A&&A.constructor==Object&&n.constructor===Object)for(s in n)if(e.___$customChildren&&e.___$customChildren[s])M=e.___$customChildren[s].map||e.___$customChildren[s],A[s]=M(n[s]);else if(C=A[s],!T&&A.hasOwnProperty(s)&&(o(C)||C&&C.constructor===Array))A[s]=n[s];else if(C&&"function"==typeof C.___$mapCustom)c(C)?(b=C.___$mapCustom(n[s],C),b=f(b),C(b)):A[s]=C.___$mapCustom(n[s],C);else if(t(n[s])&&A[s]&&A[s].constructor===Object)A[s]=n[s];else if(l){var F=function(n,e,t){return function(){u(n[t],A[t],{name:t,parent:("[i]"===r.name?r.parent:r.name)+"."+t,full:r.full+"."+t},A,l),l(l()-1)}}(n,e,s);l(l()+1),setTimeout(F,0)}else u(n[s],A[s],{name:s,parent:("[i]"===r.name?r.parent:r.name)+"."+s,full:r.full+"."+s});else if(A&&A instanceof Array)if(y=e.___$childIdName){for(p=[],_=[],s=n.length-1;s>=0;s--)for(d=n[s][y],m=A.length-1;m>=0;m--)if(C=A[m],O=f(C),h=f(O[y]),h===d){if(C.___$mapCustom)ko.isObservable(C)?(k=C.___$mapCustom(n[s],C),c(k)&&k!=C&&C(f(k))):A[m]=C.___$mapCustom(n[s],C);else if(l){var j=function(n,e,t,o){return function(){u(n[t],A[o],{name:"[i]",parent:r.name+"[i]",full:r.full+"[i]"},void 0,l),l(l()-1)}}(n,e,s,m);l(l()+1),setTimeout(j,0)}else u(n[s],A[m],{name:"[i]",parent:r.name+"[i]",full:r.full+"[i]"});_[m]=!0,p[s]=!0;break}for(m=A.length-1;m>=0;m--)_[m]||e.splice(m,1);for(s=n.length-1;s>=0;s--)p[s]||e.pushFromModel(n[s])}else if(g=[],$=e.___$mapCustom,"function"==typeof $){for(s=0,v=n.length;v>s;s++)g[s]=n[s];e($(g))}else for(e(g),s=0,v=n?n.length:0;v>s;s++)e.pushFromModel(n[s]);else T&&e(n);return"{root}"===r.name&&l?{onComplete:function(n){n&&"function"==typeof n&&(l?ko.computed(function(){n&&0===l()&&(n(),n=void 0)}).extend({throttle:50}):n())}}:void 0}function l(n,e){s=n.makeChildArraysObservable,window.console&&n.logging?(console.log(e),a=function(n,e,t){var o;o=e&&e.settingType?e.settingType+" "+n.full+" (matched: '"+((t[n.full]?n.full:"")||(t[n.parent]?n.parent:"")||n.name)+"')":"default "+n.full,console.log("- "+o)}):a=void 0}var a,s,f=ko.utils.unwrapObservable,c=ko.isObservable,m=ko.observable,p=ko.observableArray,_={name:"{root}",parent:"{root}",full:"{root}"},d=function(){};ko.viewmodel={options:{makeChildArraysObservable:!0,logging:!1},fromModel:function(n,t){var o=e(t);return l(this.options,"Mapping From Model"),r(n,o,_)},toModel:function(n){return l(this.options,"Mapping To Model"),i(n,_)},updateFromModel:function(n,e,t){var o=t?ko.observable(0):void 0;return l(this.options,"Update From Model"),u(e,n,_,void 0,o)}}}();